{"mode":"block","xmlText":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"1l-qeg!s=DeSMEsY0Z-2\">pump</variable><variable id=\"/f$~[Z;UqOIuj4;[3RWc\">Led</variable><variable id=\"%CedLpenH(LPbrMP,bF+\">F</variable><variable id=\"0_bu?z%r1,ly=wyA2)3!\">L</variable><variable id=\"ZFmr)FmF_aNo^xL_^dJ_\">Pump_state</variable><variable id=\"/.GL70Nb9oku^+aZ7~/6\">Fan</variable></variables><block type=\"yolobit_basic_forever\" id=\"w5Bl*-!,Ihc8X2tI)wP*\" x=\"-488\" y=\"-213\"><statement name=\"ONSTART\"><block type=\"aiot_relay\" id=\"r#xDOD5?c-vkxBKL%=|b\"><field name=\"state\">0</field><field name=\"NAME\">pin15</field><next><block type=\"aiot_minifan\" id=\"gVb])j;W5sEbhmjD}]=C\"><field name=\"NAME\">pin1</field><value name=\"percent\"><shadow type=\"math_number\" id=\"aqt,^RL?o?948SScb,,@\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"aiot_led_tiny_set_all\" id=\"Uw{k|a9;Yf+!nLU]I:6+\"><field name=\"port\">pin2</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"Tt7XM1r~Y6i[z_hHb5G[\"><field name=\"COLOUR\">#000000</field></shadow></value><next><block type=\"variables_set\" id=\"Os%.QEf`0}xT[D#%)F~H\"><field name=\"VAR\" id=\"ZFmr)FmF_aNo^xL_^dJ_\">Pump_state</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"s#iL*}YbZRrm#K=V):6v\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"variables_set\" id=\"a~wgAHr9A.D-Bt]ax@_u\"><field name=\"VAR\" id=\"/.GL70Nb9oku^+aZ7~/6\">Fan</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"O(QYI1ZX!U!9ZpzwdO+-\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"variables_set\" id=\"YW^AT|{_Dq3s+.PoAQ@T\"><field name=\"VAR\" id=\"/f$~[Z;UqOIuj4;[3RWc\">Led</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"oqG{$`u/4REz7H^{oLUm\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"yolobit_mqtt_connect_wifi\" id=\"G/GXUkH2ux]r3K3B){bA\"><value name=\"WIFI\"><shadow type=\"text\" id=\"{?aSWe%i.rI]EDBhF![p\"><field name=\"TEXT\">ACLAB</field></shadow></value><value name=\"PASSWORD\"><shadow type=\"text\" id=\"!evvve],n.ehMhU5GxFR\"><field name=\"TEXT\">ACLAB2023</field></shadow></value><next><block type=\"yolobit_mqtt_connect_default_servers\" id=\"3E69*cUnZh}w((QwiD)$\"><field name=\"SERVER\">io.adafruit.com</field><value name=\"USERNAME\"><shadow type=\"text\" id=\"k}uQ{8VX_:Lb6/w`rz%S\"><field name=\"TEXT\">vanminhcs</field></shadow></value><value name=\"KEY\"><shadow type=\"text\" id=\"Rk7n_IWm8+36)W~eDn[[\"><field name=\"TEXT\">aio_csum112diqw6BxJDybyDOfXLcdAU</field></shadow></value><next><block type=\"procedures_callnoreturn\" id=\"Q8]dRkKfSY#Wyj[tNIxB\"><mutation name=\"Control_Pump\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><statement name=\"FOREVER\"><block type=\"yolobit_mqtt_check_message\" id=\"nuz8@Z6ap:DoZ67$$)/;\"><next><block type=\"yolobit_events_run\" id=\"AkBE#.zudlw.siLQ@6$E\"><next><block type=\"yolobit_basic_sleep\" id=\"!,[GII^]DfuMBzwgbHqz\"><value name=\"duration\"><shadow type=\"math_number\" id=\",J%,gPPja)hI0B]OU([?\"><field name=\"NUM\">1000</field></shadow></value></block></next></block></next></block></statement></block><block type=\"yolobit_events_timer\" id=\"2Mv2^;/~.Fne!h)$%+?D\" x=\"438\" y=\"-212\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"_8^yx%^=hs;7s8{~)X4_\"><field name=\"NUM\">1</field></shadow></value><statement name=\"ACTION\"><block type=\"aiot_dht_measure\" id=\"t{kv@g~UuLcCZYH$pQUd\"><next><block type=\"aiot_lcd1602_clear\" id=\"0[]3,JOL.tm-psJ+PfbO\"><next><block type=\"aiot_lcd1602_display\" id=\"R14*CG(u?J`fa#uhqVCd\"><value name=\"string\"><shadow type=\"text\" id=\"_i^J]ChUbokJdywJ7tO:\"><field name=\"TEXT\">Hello</field></shadow><block type=\"text_join\" id=\"MFhqZ}?nf33UZteuGx)Z\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"IOthp}%zQ}v|p7u$EQ1)\"><field name=\"TEXT\">T:</field></block></value><value name=\"ADD1\"><block type=\"aiot_dht_read\" id=\"-((EX-%u9ka]hBorfPap\"><field name=\"DATA\">TEMP</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"imizI#g.?1IQ9eBqwC13\"><field name=\"TEXT\">C</field></block></value></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"FB@Xh;k~G[,TVJZIF/J#\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"J3bJSljq6[eay8n3`QXS\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\",gQYTPAbX2szmS~W,1w{\"><value name=\"string\"><shadow type=\"text\" id=\"_i^J]ChUbokJdywJ7tO:\"><field name=\"TEXT\">Hello</field></shadow><block type=\"text_join\" id=\"C%oC7D;7uyfnC}Mz%A;V\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"8.WisjYaBycEV}5iN=~q\"><field name=\"TEXT\">H:</field></block></value><value name=\"ADD1\"><block type=\"aiot_dht_read\" id=\"m6BWJ|Aj?p58^ND{YN;9\"><field name=\"DATA\">HUMID</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\".:NA#,1kI{50s3d0Dsq$\"><field name=\"TEXT\">%</field></block></value></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"C1E}sNjjKxvGRRX8:BZw\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"qB@7O.d4-QM/)KaBdEJ.\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\"T!-OV?(9HSnn!?vKkDK{\"><value name=\"string\"><shadow type=\"text\" id=\"vbQO!/E.^wr0PT4M6h8.\"><field name=\"TEXT\">Hello</field></shadow><block type=\"text_join\" id=\"@YkU^6]JgtlbV7~rv{4F\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"C1p*IkT}%**D}*5-NDWC\"><field name=\"TEXT\">S:</field></block></value><value name=\"ADD1\"><block type=\"aiot_soil_sensor\" id=\"SI@q(.;c^uo?Cq;Kysr:\"><field name=\"NAME\">pin0</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"S@v:nB/j{H/l]$^uuiEe\"><field name=\"TEXT\">%</field></block></value></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"3ZuJb|F:3D3H9upgKli%\"><field name=\"NUM\">8</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"JUG=I[SjQsyUz([ixU39\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\" id=\"3S;]uEm*,~0xkm6h}IA0\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"[z,b#OcVAbbw!mfnw7rG\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"1EsCRcbNU_pfo_)D)@]*\"><field name=\"VAR\" id=\"ZFmr)FmF_aNo^xL_^dJ_\">Pump_state</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"g?d*I`H|BX?f670:.sI?\"><field name=\"BOOL\">TRUE</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"q|Nq$}Y^byI_Sx5rzA^X\"><value name=\"string\"><shadow type=\"text\" id=\"_i^J]ChUbokJdywJ7tO:\"><field name=\"TEXT\">ON</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"8iE4@X%iC{$T^Y6lFo+a\"><field name=\"NUM\">13</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"~]v]7,{;NxsFn1S-Wos!\"><field name=\"NUM\">0</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"aiot_lcd1602_display\" id=\"GfyiEQA!D./=yO,13SDy\"><value name=\"string\"><shadow type=\"text\" id=\"{OCCf+di8cpmD?_-9,Fb\"><field name=\"TEXT\">OFF</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"kgP+ZDc]@,c/;n|n$FnS\"><field name=\"NUM\">13</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"87lI`^+T.q!iB)2ipbi[\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"BR/1dQ@??VgH0V0f;L*0\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"C?~Xi5/s!fY[Li6@e;G$\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"DDZt-](VOy{uO+1MP.nM\"><field name=\"VAR\" id=\"/.GL70Nb9oku^+aZ7~/6\">Fan</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"fDYW~ZsKHZ,16IKs.~Q2\"><field name=\"BOOL\">TRUE</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"pcHk}}%@T(b|zkPU-8)J\"><value name=\"string\"><shadow type=\"text\" id=\"7;L?a15XJP-jojEd{HKz\"><field name=\"TEXT\">ON</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"t4!k7k)LitJg4f0ZSDj?\"><field name=\"NUM\">9</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"}~VBCVX~hUu2cnaT;}6(\"><field name=\"NUM\">0</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"aiot_lcd1602_display\" id=\"GUv^ZMPK.inlvG?pmt@}\"><value name=\"string\"><shadow type=\"text\" id=\"NzSh_Nz:2UHA9O8#Nios\"><field name=\"TEXT\">OFF</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"u}cg(a3:p/LM_F$?KqWs\"><field name=\"NUM\">9</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"lK|JNZ2lwCJ1DNA}XO9o\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"4eM(].70t~T#LXSl(H@[\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"Xb:Y%;mnDp$r_}5B@J_Z\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"4{304(TuMw^mc1hHF3mm\"><field name=\"VAR\" id=\"/f$~[Z;UqOIuj4;[3RWc\">Led</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"$FpPMw[KVd85T)Y[A9q3\"><field name=\"BOOL\">TRUE</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"UMjKW,U$($DUgr%D1+6w\"><value name=\"string\"><shadow type=\"text\" id=\"S%}LH|YI?x73|5;ualam\"><field name=\"TEXT\">ON</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"PLt+/eX5bgeZ`nvCUnEH\"><field name=\"NUM\">13</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"hP4M}=}Ft}F,/vSLpXND\"><field name=\"NUM\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"aiot_lcd1602_display\" id=\"-6=mA#:yVpp[8nigc/)q\"><value name=\"string\"><shadow type=\"text\" id=\"p^[wp`MUf29ner#54.K:\"><field name=\"TEXT\">OFF</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"3euIS!B)n_,.auq)1#X`\"><field name=\"NUM\">13</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"}@2wNv]C}]/Y+iJWLLGH\"><field name=\"NUM\">1</field></shadow></value></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"procedures_defnoreturn\" id=\"bVfSxs}%ld}%)MRdPjtY\" x=\"-487\" y=\"288\"><field name=\"NAME\">Control_Pump</field><comment pinned=\"false\" h=\"80\" w=\"160\">Bật/tắt bơm từ xa</comment><statement name=\"STACK\"><block type=\"yolobit_mqtt_on_receive_message\" id=\"(2C+Wc^3XgPr)l0|5k,5\"><field name=\"message\" id=\"1l-qeg!s=DeSMEsY0Z-2\">pump</field><value name=\"TOPIC\"><shadow type=\"text\" id=\"X:u~/+3iX0+FvJ)(xPxj\"><field name=\"TEXT\">Pump</field></shadow></value><statement name=\"ACTION\"><block type=\"controls_if\" id=\"Yv667HwIXx~h;rRNH`q0\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"{~3ZNp.;9=jao20h|[2+\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"zIy1c_6[sJ7hM1nZJ87X\"><field name=\"VAR\" id=\"1l-qeg!s=DeSMEsY0Z-2\">pump</field></block></value><value name=\"B\"><block type=\"text\" id=\"Sls/!j($X8YJ51dc`TvP\"><field name=\"TEXT\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_relay\" id=\"/3Tu6:t2HA^~1y)KzqD/\"><field name=\"state\">0</field><field name=\"NAME\">pin15</field><next><block type=\"variables_set\" id=\"UNc-/M4j:Wk##8N#!8D!\"><field name=\"VAR\" id=\"ZFmr)FmF_aNo^xL_^dJ_\">Pump_state</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"p3jsNUu;TzC]K](^]M{m\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"aiot_relay\" id=\"t+d}#d#O8|wCjR/_RIq1\"><field name=\"state\">1</field><field name=\"NAME\">pin15</field><next><block type=\"variables_set\" id=\"q$U75`}tywR_jbv2t(u}\"><field name=\"VAR\" id=\"ZFmr)FmF_aNo^xL_^dJ_\">Pump_state</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"*q,0Y9qD9xSN^2EkB,OE\"><field name=\"BOOL\">TRUE</field></block></value></block></next></block></statement></block></statement><next><block type=\"yolobit_mqtt_on_receive_message\" id=\"H!D))i?Pq0axIs%xK)yo\"><field name=\"message\" id=\"%CedLpenH(LPbrMP,bF+\">F</field><value name=\"TOPIC\"><shadow type=\"text\" id=\"6l8NxW%s*^Q1V61rh1$!\"><field name=\"TEXT\">Fan</field></shadow></value><statement name=\"ACTION\"><block type=\"controls_if\" id=\"cfA!KC!ltdhJ1IC+A0]X\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"(f)ThH9yy#=e4C/}1Pzh\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\".|f~r`]R1{vxNK;R/CL[\"><field name=\"VAR\" id=\"%CedLpenH(LPbrMP,bF+\">F</field></block></value><value name=\"B\"><block type=\"text\" id=\"n{E/3-M_a89XL]]t1hP~\"><field name=\"TEXT\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\";P)eyKs.!N9)%huQ8#*R\"><field name=\"NAME\">pin1</field><value name=\"percent\"><shadow type=\"math_number\" id=\"?!3U7s[jejpLW%veW^t#\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"p`$/Bi;zLEBr-sQMSFjD\"><field name=\"VAR\" id=\"/.GL70Nb9oku^+aZ7~/6\">Fan</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"+2IF]r8shr~TRpuNr(c-\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"aiot_minifan\" id=\"f,tE4*faAa-!#p8v{3[:\"><field name=\"NAME\">pin1</field><value name=\"percent\"><shadow type=\"math_number\" id=\")!Zju3wobKBg`V%fNapd\"><field name=\"NUM\">80</field></shadow></value><next><block type=\"variables_set\" id=\"Bf7t49Pp/X,Pxi@@I6H3\"><field name=\"VAR\" id=\"/.GL70Nb9oku^+aZ7~/6\">Fan</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"=uKf0$0q[]|D{y!{8GIy\"><field name=\"BOOL\">TRUE</field></block></value></block></next></block></statement></block></statement><next><block type=\"yolobit_mqtt_on_receive_message\" id=\",(t1Pa6t18gR1V{2,ul^\"><field name=\"message\" id=\"0_bu?z%r1,ly=wyA2)3!\">L</field><value name=\"TOPIC\"><shadow type=\"text\" id=\"+scS_k}j8gY%-olO`;II\"><field name=\"TEXT\">Led</field></shadow></value><statement name=\"ACTION\"><block type=\"controls_if\" id=\"lLuxLXN@b#`KJM%onW9`\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"@xfD1cva?a~.e1b-iz}/\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"WR`]HJkX^7+ZlIIa/Y7e\"><field name=\"VAR\" id=\"0_bu?z%r1,ly=wyA2)3!\">L</field></block></value><value name=\"B\"><block type=\"text\" id=\"2nYdgI9}.JfpTXMjnQAc\"><field name=\"TEXT\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"@[SgQI1F*MQP*28=f#!8\"><field name=\"port\">pin2</field><field name=\"option\">1</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"}jDFlef/:CxYLsw1twt7\"><field name=\"COLOUR\">#ffffff</field></shadow></value><next><block type=\"aiot_led_tiny_set_all\" id=\"8EWPVh)Wwbw]f2YfnW3)\"><field name=\"port\">pin2</field><field name=\"option\">2</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"SEt8|C86=xF!V;g|bB#q\"><field name=\"COLOUR\">#ffffff</field></shadow></value><next><block type=\"aiot_led_tiny_set_all\" id=\"sbJGxi/9uip8pxoOJK;=\"><field name=\"port\">pin2</field><field name=\"option\">3</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"sfB{G4q}/PpR)|~ub);7\"><field name=\"COLOUR\">#ffffff</field></shadow></value><next><block type=\"aiot_led_tiny_set_all\" id=\"p}^({~O-?-.WZo8O_A6q\"><field name=\"port\">pin2</field><field name=\"option\">4</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"vgN#S^E-pD[JvxXY.=1.\"><field name=\"COLOUR\">#ffffff</field></shadow></value><next><block type=\"variables_set\" id=\"XIjx4)a7x@X2L9bOdsNr\"><field name=\"VAR\" id=\"/f$~[Z;UqOIuj4;[3RWc\">Led</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"}rq(B%]Ge#|~`JiRO9hI\"><field name=\"BOOL\">TRUE</field></block></value></block></next></block></next></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"aiot_led_tiny_set_all\" id=\"LJ168_t_3(.Nd`zLrc2I\"><field name=\"port\">pin2</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"?)aBnm$oCT4${rJWCD{z\"><field name=\"COLOUR\">#000000</field></shadow></value><next><block type=\"variables_set\" id=\".W4A6{8d@f(r}xyFg(^^\"><field name=\"VAR\" id=\"/f$~[Z;UqOIuj4;[3RWc\">Led</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"A8+:~4Eh61O3Cc);@ztz\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement></block></statement></block></next></block></next></block></statement></block><block type=\"yolobit_events_timer\" id=\"kRQyP}VN?m%Sq8oC$PwM\" x=\"438\" y=\"637\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\";:fWIv-IJC4O61M4k}w2\"><field name=\"NUM\">15</field></shadow></value><statement name=\"ACTION\"><block type=\"yolobit_mqtt_publish\" id=\"nsj+54:ugt7q^)u7`o%l\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"=m49pe.8GE13!{#C7B^k\"><field name=\"TEXT\">Hello</field></shadow><block type=\"aiot_dht_read\" id=\"Ed.iCz95@44GpDtX%E=4\"><field name=\"DATA\">HUMID</field></block></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"`3=uo(^n2_q#]]AS)dmd\"><field name=\"TEXT\">Humid</field></shadow></value><next><block type=\"yolobit_mqtt_publish\" id=\"09d#mG,;0H]iSYK^D=|m\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"cl60`jqq5b?S2h1tnj@d\"><field name=\"TEXT\">Hello</field></shadow><block type=\"aiot_dht_read\" id=\"QLpCOu_C2Vl_au{ff1e+\"><field name=\"DATA\">TEMP</field></block></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"Hs]?]G+Ojn/`yz.V?WRx\"><field name=\"TEXT\">Temperature</field></shadow></value><next><block type=\"yolobit_mqtt_publish\" id=\"c/8.@cbZhO=@#vH{{Eo?\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"/VXXlAY$J-./uQH1Yzk]\"><field name=\"TEXT\">Hello</field></shadow><block type=\"aiot_soil_sensor\" id=\")i9NT=DXXwXI?0s=R7EK\"><field name=\"NAME\">pin0</field></block></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"zx2;;=8uAX|WHV{@8XF(\"><field name=\"TEXT\">Soil</field></shadow></value></block></next></block></next></block></statement></block><block type=\"yolobit_events_condition\" id=\"v.p_0eYUgNGp3(jOP^~d\" x=\"438\" y=\"838\"><value name=\"CONDITION\"><block type=\"yolobit_input_button_is_pressed\" id=\"YXp2`4r#qg?IMqJ4Jvjm\"><field name=\"button\">a</field></block></value><statement name=\"ACTION\"><block type=\"controls_if\" id=\"[`zm:]x}Z3QiWQ}V%b;F\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"afb1G=/UGa(}4%H6*GkQ\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"]1tRy+,R%(T,i;fCaN/8\"><field name=\"VAR\" id=\"ZFmr)FmF_aNo^xL_^dJ_\">Pump_state</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"gOv0~_.K}M^$UeTUfCOB\"><field name=\"BOOL\">TRUE</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_relay\" id=\"q7a(c8V;Ce~A0B,=aFq|\"><field name=\"state\">0</field><field name=\"NAME\">pin15</field><next><block type=\"variables_set\" id=\"fj(:jX!^0o3jP2:D@Kd%\"><field name=\"VAR\" id=\"ZFmr)FmF_aNo^xL_^dJ_\">Pump_state</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"+P!!wK|9-ZCx}[xV[+*2\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"yolobit_mqtt_publish\" id=\"U#pysrr[fV8{);~;Y?bT\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"^D}4~c%1;08KZxry0B_2\"><field name=\"TEXT\">Hello</field></shadow><block type=\"text\" id=\"5;%tF^}QWEYSBF+I)!3j\"><field name=\"TEXT\">0</field></block></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"x;(40du8^6losm|$(PVV\"><field name=\"TEXT\">Pump</field></shadow></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"aiot_relay\" id=\"-m]|m?+BwCayq?j=Vti[\"><field name=\"state\">1</field><field name=\"NAME\">pin15</field><next><block type=\"variables_set\" id=\")KZ@00P|fi+(g:6.?-`q\"><field name=\"VAR\" id=\"ZFmr)FmF_aNo^xL_^dJ_\">Pump_state</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"caO`x!;$Dq/2oR^[r)4(\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"yolobit_mqtt_publish\" id=\"%QRKcn)MMK`eCdLQf4^S\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"^D}4~c%1;08KZxry0B_2\"><field name=\"TEXT\">Hello</field></shadow><block type=\"text\" id=\"Sp(.@cr#!.V!-FWQP0Hv\"><field name=\"TEXT\">1</field></block></value><value name=\"TOPIC\"><shadow type=\"text\" id=\":^3I+q4lYluN7G-}#/@J\"><field name=\"TEXT\">Pump</field></shadow></value></block></next></block></next></block></statement></block></statement></block><block type=\"yolobit_events_condition\" id=\"^VkKmyYim[Z@I`1NxHo{\" x=\"438\" y=\"1188\"><value name=\"CONDITION\"><block type=\"yolobit_input_button_is_pressed\" id=\"lG|5Weu:hwfqn;Z_CS~F\"><field name=\"button\">a+b</field></block></value><statement name=\"ACTION\"><block type=\"variables_set\" id=\"EY$,g%.y^|ym6X|o]OK/\"><field name=\"VAR\" id=\"/f$~[Z;UqOIuj4;[3RWc\">Led</field><value name=\"VALUE\"><block type=\"logic_negate\" id=\"=9zmFq=r3.H^mq?aGohg\"><value name=\"BOOL\"><block type=\"variables_get\" id=\"gtvCPUyDI/I~/{O7ax9z\"><field name=\"VAR\" id=\"/f$~[Z;UqOIuj4;[3RWc\">Led</field></block></value></block></value><next><block type=\"controls_if\" id=\"awh{y9kDarq6`Kr5LJcV\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"MJsNCpq0H$0l4+Qj0CR.\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"KHd_|m]Rn_:+N=J:YU^h\"><field name=\"VAR\" id=\"/f$~[Z;UqOIuj4;[3RWc\">Led</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"Iws3/g+WE_KEijkVol6$\"><field name=\"BOOL\">TRUE</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"M4gB$_Sdg3h$vJX]jekl\"><field name=\"port\">pin2</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"*bNY5FRhB~(R+uhlu-A_\"><field name=\"COLOUR\">#ffffff</field></shadow></value><next><block type=\"yolobit_mqtt_publish\" id=\"0L96iC`r5X#/.yKKJ$Zb\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"^D}4~c%1;08KZxry0B_2\"><field name=\"TEXT\">Hello</field></shadow><block type=\"text\" id=\"{~.gZb]4b?3*gAwqogXZ\"><field name=\"TEXT\">1</field></block></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"dpKl4g23oHYN+[ZH1U]-\"><field name=\"TEXT\">Led</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"aiot_led_tiny_set_all\" id=\"oCn*oMauJs$N@!Qiv)3f\"><field name=\"port\">pin2</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"Q]-(+|#Kjed(j]v{JPl1\"><field name=\"COLOUR\">#000000</field></shadow></value><next><block type=\"yolobit_mqtt_publish\" id=\"Xz3daQgj/-uSxIP7F9r?\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"^D}4~c%1;08KZxry0B_2\"><field name=\"TEXT\">Hello</field></shadow><block type=\"text\" id=\"L=O}c13,b=5q8f,?6gCf\"><field name=\"TEXT\">0</field></block></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"9ld]}ma$g16n:Qpq%{z%\"><field name=\"TEXT\">Led</field></shadow></value></block></next></block></statement></block></next></block></statement></block><block type=\"yolobit_events_condition\" id=\"M4qRR[;Bc~312YF@2!]=\" x=\"-488\" y=\"1263\"><value name=\"CONDITION\"><block type=\"yolobit_input_button_is_pressed\" id=\"]h;Di1$AxHsquc^A1J%t\"><field name=\"button\">b</field></block></value><statement name=\"ACTION\"><block type=\"controls_if\" id=\"LjB[1A^k:r$5M{ci!+VL\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"yo;~%n*6_IBP,|;Io/O{\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\",i)bw#Ls;nCxDY5/hKHn\"><field name=\"VAR\" id=\"/.GL70Nb9oku^+aZ7~/6\">Fan</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"ZWu|[l.TE(zPd6k88,=j\"><field name=\"BOOL\">TRUE</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"d[`RK/NK=]o_x89KBY@v\"><field name=\"NAME\">pin1</field><value name=\"percent\"><shadow type=\"math_number\" id=\"%%tw(?z8U}PCulYtQfpK\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"jrEP?ZK%Us59GRpP8YTT\"><field name=\"VAR\" id=\"/.GL70Nb9oku^+aZ7~/6\">Fan</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"4wpRMzebTi9{#8d7q0qW\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"yolobit_mqtt_publish\" id=\"[q:+6D=)Ipi8_wSObU2(\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"^D}4~c%1;08KZxry0B_2\"><field name=\"TEXT\">Hello</field></shadow><block type=\"text\" id=\"ahn%1LgJ1w@rqoc,4;ow\"><field name=\"TEXT\">0</field></block></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"66jgp:G7Nf9^rEo-}BAf\"><field name=\"TEXT\">Fan</field></shadow></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"aiot_minifan\" id=\"8q_5mk#If,t{ktrA_m:2\"><field name=\"NAME\">pin1</field><value name=\"percent\"><shadow type=\"math_number\" id=\"DRD*Du{u`Xo.i0Fyjj0;\"><field name=\"NUM\">80</field></shadow></value><next><block type=\"variables_set\" id=\"BeVNF]/Ro?3_;Q)$%Lz$\"><field name=\"VAR\" id=\"/.GL70Nb9oku^+aZ7~/6\">Fan</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"dqk.|2u.aaeiFIdGLav3\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"yolobit_mqtt_publish\" id=\"7W,ELBit)2993eFbB1(]\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"{-r}+78.f*;PygeQjqLz\"><field name=\"TEXT\">1</field></shadow></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"FJwqd~M=qhZYPOzA7Eta\"><field name=\"TEXT\">Fan</field></shadow></value></block></next></block></next></block></statement></block></statement></block></xml>","python":"from yolobit import *\nbutton_a.on_pressed = None\nbutton_b.on_pressed = None\nbutton_a.on_pressed_ab = button_b.on_pressed_ab = -1\nfrom aiot_rgbled import RGBLed\nfrom mqtt import *\nfrom event_manager import *\nimport time\nfrom machine import Pin, SoftI2C\nfrom aiot_dht20 import DHT20\nfrom aiot_lcd1602 import LCD1602\n\ntiny_rgb = RGBLed(pin2.pin, 4)\n\nevent_manager.reset()\n\naiot_dht20 = DHT20()\n\naiot_lcd1602 = LCD1602()\n\ndef on_event_timer_callback_M_v_F_n_e():\n  global pump, Led, F, L, Pump_state, Fan\n  aiot_dht20.read_dht20()\n  aiot_lcd1602.clear()\n  aiot_lcd1602.move_to(0, 0)\n  aiot_lcd1602.putstr((''.join([str(x) for x in ['T:', aiot_dht20.dht20_temperature(), 'C']])))\n  aiot_lcd1602.move_to(0, 1)\n  aiot_lcd1602.putstr((''.join([str(x2) for x2 in ['H:', aiot_dht20.dht20_humidity(), '%']])))\n  aiot_lcd1602.move_to(8, 1)\n  aiot_lcd1602.putstr((''.join([str(x3) for x3 in ['S:', round(translate((pin0.read_analog()), 0, 4095, 0, 100)), '%']])))\n  if Pump_state == True:\n    aiot_lcd1602.move_to(13, 0)\n    aiot_lcd1602.putstr('ON')\n  else:\n    aiot_lcd1602.move_to(13, 0)\n    aiot_lcd1602.putstr('OFF')\n  if Fan == True:\n    aiot_lcd1602.move_to(9, 0)\n    aiot_lcd1602.putstr('ON')\n  else:\n    aiot_lcd1602.move_to(9, 0)\n    aiot_lcd1602.putstr('OFF')\n  if Led == True:\n    aiot_lcd1602.move_to(13, 1)\n    aiot_lcd1602.putstr('ON')\n  else:\n    aiot_lcd1602.move_to(13, 1)\n    aiot_lcd1602.putstr('OFF')\n\nevent_manager.add_timer_event(1000, on_event_timer_callback_M_v_F_n_e)\n\ndef on_mqtt_message_receive_callback__Pump_(pump):\n  global Led, F, L, Pump_state, Fan\n  if pump == '0':\n    pin15.write_digital(0)\n    Pump_state = False\n  else:\n    pin15.write_digital(1)\n    Pump_state = True\n\ndef on_mqtt_message_receive_callback__Fan_(F):\n  global pump, Led, L, Pump_state, Fan\n  if F == '0':\n    pin1.write_analog(round(translate(0, 0, 100, 0, 1023)))\n    Fan = False\n  else:\n    pin1.write_analog(round(translate(80, 0, 100, 0, 1023)))\n    Fan = True\n\ndef on_mqtt_message_receive_callback__Led_(L):\n  global pump, Led, F, Pump_state, Fan\n  if L == '1':\n    tiny_rgb.show(1, hex_to_rgb('#ffffff'))\n    tiny_rgb.show(2, hex_to_rgb('#ffffff'))\n    tiny_rgb.show(3, hex_to_rgb('#ffffff'))\n    tiny_rgb.show(4, hex_to_rgb('#ffffff'))\n    Led = True\n  else:\n    tiny_rgb.show(0, hex_to_rgb('#000000'))\n    Led = False\n\n# Bật/tắt bơm từ xa\ndef Control_Pump():\n  global pump, Led, F, L, Pump_state, Fan, aiot_dht20, aiot_lcd1602, tiny_rgb\n  mqtt.on_receive_message('Pump', on_mqtt_message_receive_callback__Pump_)\n  mqtt.on_receive_message('Fan', on_mqtt_message_receive_callback__Fan_)\n  mqtt.on_receive_message('Led', on_mqtt_message_receive_callback__Led_)\n\ndef on_event_timer_callback_k_R_Q_y_P():\n  global pump, Led, F, L, Pump_state, Fan\n  mqtt.publish('Humid', (aiot_dht20.dht20_humidity()))\n  mqtt.publish('Temperature', (aiot_dht20.dht20_temperature()))\n  mqtt.publish('Soil', (round(translate((pin0.read_analog()), 0, 4095, 0, 100))))\n\nevent_manager.add_timer_event(15000, on_event_timer_callback_k_R_Q_y_P)\n\ndef on_event_condition_callback_v_p_e_Y_U():\n  global pump, Led, F, L, Pump_state, Fan\n  if Pump_state == True:\n    pin15.write_digital(0)\n    Pump_state = False\n    mqtt.publish('Pump', '0')\n  else:\n    pin15.write_digital(1)\n    Pump_state = True\n    mqtt.publish('Pump', '1')\n\nevent_manager.add_condition_event(lambda:(button_a.is_pressed()), on_event_condition_callback_v_p_e_Y_U)\n\ndef on_event_condition_callback_V_k_K_m_y():\n  global pump, Led, F, L, Pump_state, Fan\n  Led = not Led\n  if Led == True:\n    tiny_rgb.show(0, hex_to_rgb('#ffffff'))\n    mqtt.publish('Led', '1')\n  else:\n    tiny_rgb.show(0, hex_to_rgb('#000000'))\n    mqtt.publish('Led', '0')\n\nevent_manager.add_condition_event(lambda:(button_a.is_pressed_ab()), on_event_condition_callback_V_k_K_m_y)\n\ndef on_event_condition_callback_M_q_R_R_B():\n  global pump, Led, F, L, Pump_state, Fan\n  if Fan == True:\n    pin1.write_analog(round(translate(0, 0, 100, 0, 1023)))\n    Fan = False\n    mqtt.publish('Fan', '0')\n  else:\n    pin1.write_analog(round(translate(80, 0, 100, 0, 1023)))\n    Fan = True\n    mqtt.publish('Fan', '1')\n\nevent_manager.add_condition_event(lambda:(button_b.is_pressed()), on_event_condition_callback_M_q_R_R_B)\n\nif True:\n  pin15.write_digital(0)\n  pin1.write_analog(round(translate(0, 0, 100, 0, 1023)))\n  tiny_rgb.show(0, hex_to_rgb('#000000'))\n  Pump_state = False\n  Fan = False\n  Led = False\n  mqtt.connect_wifi('ACLAB', 'ACLAB2023')\n  mqtt.connect_broker(server='io.adafruit.com', port=1883, username='vanminhcs', password='aio_csum112diqw6BxJDybyDOfXLcdAU')\n  Control_Pump()\n\nwhile True:\n  mqtt.check_message()\n  event_manager.run()\n  time.sleep_ms(1000)\n  time.sleep_ms(10)\n","name":"Project","extensions":[{"id":"yolobit-AITT-VN-yolobit_extension_mqtt","src":"https://github.com/AITT-VN/yolobit_extension_mqtt","name":"MQTT","description":"Mục mở rộng hỗ trợ giao tiếp MQTT cho ứng dụng IoT"},{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"}],"device":"yolobit"}